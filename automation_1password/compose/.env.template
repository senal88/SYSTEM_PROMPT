# .env.template – Stack híbrida macOS + VPS (Traefik, Portainer, NocoDB, Appsmith, n8n, LM Studio, Hugging Face Pro)
# Uso: op inject -i .env.template -o .env && chmod 600 .env
# Referencie itens nos cofres 1p_macos (desenvolvimento) e 1p_vps (produção).

###############################################################################
# Identidade do projeto
###############################################################################
PROJECT_SLUG={{PROJECT_SLUG}}
ENVIRONMENT={{ENVIRONMENT}}                 # dev | staging | prod
PRIMARY_DOMAIN={{PRIMARY_DOMAIN}}
SECONDARY_DOMAIN={{SECONDARY_DOMAIN}}
INTERNAL_DOMAIN={{INTERNAL_DOMAIN}}         # exemplo: internal.example.com

###############################################################################
# Banco de dados PostgreSQL + pgvector
###############################################################################
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=op://{{VAULT_MACOS}}/{{ITEM_POSTGRES_DEV}}/username
POSTGRES_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_POSTGRES_DEV}}/password
POSTGRES_DB={{PROJECT_SLUG}}_${ENVIRONMENT}

POSTGRES_USER_PROD=op://{{VAULT_VPS}}/{{ITEM_POSTGRES_PROD}}/username
POSTGRES_PASSWORD_PROD=op://{{VAULT_VPS}}/{{ITEM_POSTGRES_PROD}}/password
POSTGRES_DB_PROD={{PROJECT_SLUG}}_prod

PGVECTOR_EXTENSION=vector
PGVECTOR_SCHEMAS={{PGVECTOR_SCHEMAS}}       # ex.: embeddings,analytics
PG_BACKUP_BUCKET=op://{{VAULT_VPS}}/{{ITEM_PG_BACKUP}}/bucket
PG_BACKUP_ACCESS_KEY=op://{{VAULT_VPS}}/{{ITEM_PG_BACKUP}}/access_key
PG_BACKUP_SECRET_KEY=op://{{VAULT_VPS}}/{{ITEM_PG_BACKUP}}/secret_key

###############################################################################
# Redis
###############################################################################
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_REDIS_DEV}}/password
REDIS_PASSWORD_PROD=op://{{VAULT_VPS}}/{{ITEM_REDIS_PROD}}/password

###############################################################################
# MongoDB
###############################################################################
MONGODB_URI=op://{{VAULT_MACOS}}/{{ITEM_MONGODB_DEV}}/connection_uri
MONGODB_URI_PROD=op://{{VAULT_VPS}}/{{ITEM_MONGODB_PROD}}/connection_uri
MONGODB_ROOT_USER=op://{{VAULT_VPS}}/{{ITEM_MONGODB_PROD}}/username
MONGODB_ROOT_PASSWORD=op://{{VAULT_VPS}}/{{ITEM_MONGODB_PROD}}/password

###############################################################################
# Traefik (Reverse Proxy)
###############################################################################
TRAEFIK_ACME_EMAIL=op://{{VAULT_VPS}}/{{ITEM_TRAEFIK_ACME}}/email
TRAEFIK_ACME_DNS_TOKEN=op://{{VAULT_VPS}}/{{ITEM_TRAEFIK_ACME}}/token
TRAEFIK_DASHBOARD_USER=op://{{VAULT_MACOS}}/{{ITEM_TRAEFIK_DASH}}/username
TRAEFIK_DASHBOARD_PASSHASH=op://{{VAULT_MACOS}}/{{ITEM_TRAEFIK_DASH}}/password_hash
TRAEFIK_METRICS_PROM_TOKEN=op://{{VAULT_VPS}}/{{ITEM_TRAEFIK_METRICS}}/token

###############################################################################
# Portainer
###############################################################################
PORTAINER_ADMIN_USER=op://{{VAULT_VPS}}/{{ITEM_PORTAINER_ADMIN}}/username
PORTAINER_ADMIN_PASSWORD=op://{{VAULT_VPS}}/{{ITEM_PORTAINER_ADMIN}}/password
PORTAINER_AGENT_SECRET=op://{{VAULT_VPS}}/{{ITEM_PORTAINER_AGENT}}/secret

###############################################################################
# NocoDB
###############################################################################
NOCODB_JWT_SECRET=op://{{VAULT_MACOS}}/{{ITEM_NOCODB}}/jwt_secret
NOCODB_MASTER_EMAIL=op://{{VAULT_MACOS}}/{{ITEM_NOCODB}}/admin_email
NOCODB_MASTER_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_NOCODB}}/admin_password
NOCODB_STORAGE_PATH=/var/lib/nocodb

###############################################################################
# Appsmith
###############################################################################
APPSMITH_SUPER_ADMIN_EMAIL=op://{{VAULT_MACOS}}/{{ITEM_APPSMITH}}/admin_email
APPSMITH_SUPER_ADMIN_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_APPSMITH}}/admin_password
APPSMITH_ENCRYPTION_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_APPSMITH}}/encryption_password
APPSMITH_ENCRYPTION_SALT=op://{{VAULT_MACOS}}/{{ITEM_APPSMITH}}/encryption_salt

###############################################################################
# n8n
###############################################################################
N8N_ENCRYPTION_KEY=op://{{VAULT_MACOS}}/{{ITEM_N8N}}/encryption_key
N8N_USER_MANAGEMENT_JWT_SECRET=op://{{VAULT_MACOS}}/{{ITEM_N8N}}/jwt_secret
N8N_BASIC_AUTH_USER=op://{{VAULT_MACOS}}/{{ITEM_N8N}}/basic_user
N8N_BASIC_AUTH_PASSWORD=op://{{VAULT_MACOS}}/{{ITEM_N8N}}/basic_password
N8N_WEBHOOK_URL=https://{{PRIMARY_DOMAIN}}/n8n/

###############################################################################
# LM Studio / Ollama / Serviços LLM locais
###############################################################################
LMSTUDIO_MODELS_DIR={{LMSTUDIO_MODELS_DIR}}                   # ex.: /Users/{{USER}}/hf/models/gguf
OLLAMA_HOST=http://localhost:11434
RAG_CHROMA_PATH={{RAG_CHROMA_PATH}}                           # ex.: /Users/{{USER}}/hf/knowledge/chroma
RAG_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

###############################################################################
# Hugging Face Pro (1TB)
###############################################################################
HF_HOME={{HF_HOME}}                                           # ex.: /Users/{{USER}}/hf
HF_DATASETS_CACHE={{HF_DATASETS_CACHE}}
HF_HUB_CACHE={{HF_HUB_CACHE}}
HF_TOKEN=op://{{VAULT_MACOS}}/{{ITEM_HF_TOKEN}}/token
HF_ORG=op://{{VAULT_MACOS}}/{{ITEM_HF_ORG}}/name
HF_ENDPOINT_TOKEN=op://{{VAULT_VPS}}/{{ITEM_HF_ENDPOINT}}/token
HF_DATA_BUCKET=op://{{VAULT_VPS}}/{{ITEM_HF_DATA}}/bucket

###############################################################################
# Serviço Web / API principal
###############################################################################
APP_URL=https://{{PRIMARY_DOMAIN}}
APP_PORT=8080
API_KEY=op://{{VAULT_MACOS}}/{{ITEM_API_KEYS}}/api_key
API_SECRET=op://{{VAULT_MACOS}}/{{ITEM_API_KEYS}}/api_secret
SESSION_SECRET=op://{{VAULT_MACOS}}/{{ITEM_API_KEYS}}/session_secret

###############################################################################
# Integrações externas
###############################################################################
CLOUDFLARE_API_TOKEN=op://{{VAULT_VPS}}/{{ITEM_CLOUDFLARE}}/api_token
CLOUDFLARE_ZONE_ID=op://{{VAULT_VPS}}/{{ITEM_CLOUDFLARE}}/zone_id
CLOUDFLARE_ACCOUNT_ID=op://{{VAULT_VPS}}/{{ITEM_CLOUDFLARE}}/account_id
OPENAI_API_KEY=op://{{VAULT_MACOS}}/{{ITEM_OPENAI}}/api_key
ANTHROPIC_API_KEY=op://{{VAULT_MACOS}}/{{ITEM_ANTHROPIC}}/api_key
GEMINI_API_KEY=op://{{VAULT_MACOS}}/{{ITEM_GEMINI}}/api_key
PERPLEXITY_API_KEY=op://{{VAULT_MACOS}}/{{ITEM_PERPLEXITY}}/api_key
GITHUB_TOKEN=op://{{VAULT_MACOS}}/{{ITEM_GITHUB}}/token

###############################################################################
# Observabilidade / Logs
###############################################################################
SENTRY_DSN=op://{{VAULT_MACOS}}/{{ITEM_SENTRY}}/dsn
LOG_LEVEL=info
PAPERTRAIL_ADDRESS=op://{{VAULT_VPS}}/{{ITEM_PAPERTRAIL}}/host
PAPERTRAIL_PORT=op://{{VAULT_VPS}}/{{ITEM_PAPERTRAIL}}/port
PROMTAIL_CLIENT_BASIC_AUTH_USER=op://{{VAULT_VPS}}/{{ITEM_PROMTAIL}}/username
PROMTAIL_CLIENT_BASIC_AUTH_PASS=op://{{VAULT_VPS}}/{{ITEM_PROMTAIL}}/password

###############################################################################
# 1Password Connect / CLI (opcional)
###############################################################################
OP_CONNECT_HOST_MAC=op://{{VAULT_MACOS}}/{{ITEM_OP_CONNECT}}/host
OP_CONNECT_TOKEN_MAC=op://{{VAULT_MACOS}}/{{ITEM_OP_CONNECT}}/token
OP_CONNECT_HOST_VPS=op://{{VAULT_VPS}}/{{ITEM_OP_CONNECT}}/host
OP_CONNECT_TOKEN_VPS=op://{{VAULT_VPS}}/{{ITEM_OP_CONNECT}}/token

###############################################################################
# Identidade SSH / Git
###############################################################################
SSH_DEV_PRIVATE_KEY=op://{{VAULT_MACOS}}/{{ITEM_SSH_DEV}}/private_key
SSH_DEV_PUBLIC_KEY=op://{{VAULT_MACOS}}/{{ITEM_SSH_DEV}}/public_key
SSH_PROD_PRIVATE_KEY=op://{{VAULT_VPS}}/{{ITEM_SSH_PROD}}/private_key
SSH_PROD_PUBLIC_KEY=op://{{VAULT_VPS}}/{{ITEM_SSH_PROD}}/public_key
GIT_USERNAME=op://{{VAULT_MACOS}}/{{ITEM_GIT}}/username
GIT_PERSONAL_TOKEN=op://{{VAULT_MACOS}}/{{ITEM_GIT}}/token

###############################################################################
# Variáveis auxiliares (substituir manualmente)
###############################################################################
VAULT_MACOS=1p_macos
VAULT_VPS=1p_vps
ITEM_POSTGRES_DEV=postgres-dev
ITEM_POSTGRES_PROD=postgres-prod
ITEM_PG_BACKUP=postgres-backup
ITEM_REDIS_DEV=redis-dev
ITEM_REDIS_PROD=redis-prod
ITEM_MONGODB_DEV=mongodb-dev
ITEM_MONGODB_PROD=mongodb-prod
ITEM_TRAEFIK_ACME=traefik-acme
ITEM_TRAEFIK_DASH=traefik-dashboard
ITEM_TRAEFIK_METRICS=traefik-metrics
ITEM_PORTAINER_ADMIN=portainer-admin
ITEM_PORTAINER_AGENT=portainer-agent
ITEM_NOCODB=nocodb-admin
ITEM_APPSMITH=appsmith-admin
ITEM_N8N=n8n-automation
ITEM_HF_TOKEN=huggingface-token
ITEM_HF_ORG=huggingface-org
ITEM_HF_ENDPOINT=huggingface-endpoint
ITEM_HF_DATA=huggingface-data
ITEM_API_KEYS=platform-api-keys
ITEM_CLOUDFLARE=cloudflare-global
ITEM_OPENAI=openai-api
ITEM_ANTHROPIC=anthropic-api
ITEM_GEMINI=gemini-api
ITEM_PERPLEXITY=perplexity-api
ITEM_GITHUB=github-token
ITEM_SENTRY=sentry-dsn
ITEM_PAPERTRAIL=papertrail-syslog
ITEM_PROMTAIL=promtail-client
ITEM_OP_CONNECT=op-connect
ITEM_SSH_DEV=ssh-dev
ITEM_SSH_PROD=ssh-prod
ITEM_GIT=git-access
