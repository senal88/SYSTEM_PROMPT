# Cursor Rules - Execu√ß√£o Autom√°tica de Planejamentos Aprovados

## üéØ REGRA PRINCIPAL: Execu√ß√£o Autom√°tica

**PLANEJAMENTOS APROVADOS DEVEM SER EXECUTADOS AUTOMATICAMENTE AT√â A PARTE MANUAL**

Quando um planejamento √© aprovado pelo usu√°rio, voc√™ DEVE executar automaticamente seguindo a sequ√™ncia l√≥gica abaixo, SEM perguntar novamente sobre cada etapa.

---

## üìã SEQU√äNCIA L√ìGICA DE EXECU√á√ÉO OBRIGAT√ìRIA

### FASE 1: Atualiza√ß√£o de Contexto e Sistema

#### 1.1 Contexto Global
- ‚úÖ Atualizar `~/Dotfiles/context/global/CONTEXTO_GLOBAL_COMPLETO.md`
- ‚úÖ Atualizar `~/Dotfiles/context/cursor/CONTEXTO_CURSOR.md`
- ‚úÖ Atualizar `~/Dotfiles/context/vscode/CONTEXTO_VSCODE.md`
- ‚úÖ Atualizar `~/Dotfiles/context/claude/CONTEXTO_CLAUDE.md`
- ‚úÖ Atualizar `~/Dotfiles/context/gemini/CONTEXTO_GEMINI.md`
- ‚úÖ Atualizar `~/Dotfiles/context/chatgpt/CONTEXTO_CHATGPT.md`
- ‚úÖ Executar: `~/Dotfiles/scripts/context/update-global-context.sh`

#### 1.2 Sistema e Projetos
- ‚úÖ Verificar e atualizar informa√ß√µes do sistema (macOS/VPS)
- ‚úÖ Validar estrutura de projetos
- ‚úÖ Atualizar `~/Dotfiles/context/global/system-info.json`

### FASE 2: Cofres e Credenciais (1Password)

#### 2.1 Valida√ß√£o de Cofres
- ‚úÖ Verificar vaults dispon√≠veis: `op vault list`
- ‚úÖ Detectar vault correto (1p_macos ‚Üí Personal ‚Üí fallback)
- ‚úÖ Validar autentica√ß√£o: `op whoami`

#### 2.2 Valida√ß√£o de Credenciais
- ‚úÖ Verificar API Keys existentes:
  - `API-VPS-HOSTINGER`
  - `Gemini-API-Keys`
  - `GitHub-Token`
  - `HuggingFace-Token`
  - Outras conforme necess√°rio
- ‚úÖ Validar expira√ß√£o (remover se expiradas)
- ‚úÖ Sincronizar: `~/Dotfiles/scripts/sync/sync-1password-to-dotfiles.sh`

### FASE 3: Terminais e Sistemas

#### 3.1 macOS (Zsh)
- ‚úÖ Validar `~/Dotfiles/scripts/shell/zshrc-macos.sh`
- ‚úÖ Aplicar ao `~/.zshrc` se necess√°rio
- ‚úÖ Verificar vari√°veis de ambiente:
  - `DOTFILES_DIR`
  - `GCP_PROJECT_ID`
  - `HOSTINGER_API_TOKEN`
  - `GOOGLE_API_KEY`
  - `GITHUB_TOKEN`
  - `HF_TOKEN`

#### 3.2 Ubuntu VPS (Bash)
- ‚úÖ Validar `~/Dotfiles/scripts/shell/bashrc-ubuntu.sh`
- ‚úÖ Sincronizar para VPS: `~/Dotfiles/scripts/sync/sync-global-configs.sh vps`
- ‚úÖ Aplicar no VPS via SSH

### FASE 4: IDEs (Cursor e VSCode)

#### 4.1 Cursor 2.0
- ‚úÖ Validar `~/Dotfiles/configs/cursor/settings.json`
- ‚úÖ Validar `~/Dotfiles/configs/cursor/keybindings.json`
- ‚úÖ Aplicar: `~/Dotfiles/scripts/install/cursor.sh`
- ‚úÖ Atualizar contexto Cursor

#### 4.2 VSCode
- ‚úÖ Validar `~/Dotfiles/configs/vscode/settings.json`
- ‚úÖ Validar extens√µes: `~/Dotfiles/configs/extensions/recommended.json`
- ‚úÖ Aplicar configura√ß√µes

### FASE 5: Contexto Global VPS/macOS

#### 5.1 Contexto VPS
- ‚úÖ Validar informa√ß√µes do VPS:
  - IP: 147.79.81.59
  - Dom√≠nio: senamfo.com.br
  - Usu√°rios: root, admin
  - Stack: Coolify, n8n, Chatwoot
- ‚úÖ Atualizar contexto global com informa√ß√µes VPS

#### 5.2 Contexto macOS
- ‚úÖ Validar informa√ß√µes do macOS:
  - Path: `/Users/luiz.sena88/Dotfiles`
  - Shell: zsh
  - Ferramentas: Raycast, Karabiner
- ‚úÖ Atualizar contexto global com informa√ß√µes macOS

### FASE 6: Automa√ß√£o 1Password e GitHub

#### 6.1 1Password
- ‚úÖ Validar CLI instalado: `command -v op`
- ‚úÖ Validar autentica√ß√£o: `op whoami`
- ‚úÖ Validar scripts de automa√ß√£o:
  - `~/Dotfiles/scripts/sync/sync-1password-to-dotfiles.sh`
  - `~/Dotfiles/scripts/governance/setup-oauth-local.sh`
- ‚úÖ Executar sincroniza√ß√£o se necess√°rio

#### 6.2 GitHub
- ‚úÖ Validar CLI instalado: `command -v gh`
- ‚úÖ Validar autentica√ß√£o: `gh auth status`
- ‚úÖ Validar reposit√≥rio: `gh repo view senal88/infraestrutura-vps`
- ‚úÖ Validar secrets e variables configurados
- ‚úÖ Validar workflows GitHub Actions

### FASE 7: Codespaces e DevContainers

#### 7.1 DevContainers
- ‚úÖ Validar `~/Dotfiles/templates/devcontainer/devcontainer.json`
- ‚úÖ Validar `~/Dotfiles/templates/devcontainer/post-create.sh`
- ‚úÖ Validar vari√°veis de ambiente no devcontainer
- ‚úÖ Validar contexto setup: `~/Dotfiles/templates/devcontainer/context-setup.sh`

#### 7.2 GitHub Codespaces
- ‚úÖ Validar `~/Dotfiles/templates/github/workflows/codespace-setup.yml`
- ‚úÖ Validar vari√°veis de ambiente configuradas
- ‚úÖ Validar contexto carregado automaticamente

### FASE 8: MCP Servers

#### 8.1 Valida√ß√£o de MCP Servers
- ‚úÖ Validar `~/Dotfiles/configs/mcp-servers.json`
- ‚úÖ Validar configura√ß√£o Cursor: `~/Dotfiles/configs/mcp/cursor-mcp-servers.json`
- ‚úÖ Validar configura√ß√£o Claude: `~/Dotfiles/configs/mcp/claude-mcp-servers.json`
- ‚úÖ Verificar servidores configurados:
  - `hostinger-mcp` (API Token validado)
  - `filesystem`
  - `git`
  - `github`
  - `docker`
  - Outros conforme necess√°rio

#### 8.2 Teste de MCP Servers
- ‚úÖ Verificar se servidores est√£o acess√≠veis
- ‚úÖ Validar vari√°veis de ambiente dos servidores
- ‚úÖ Testar conex√£o quando poss√≠vel

### FASE 9: APIs e Chaves Validadas

#### 9.1 Valida√ß√£o de API Keys
- ‚úÖ **Gemini**: Validar `GOOGLE_API_KEY` e `GEMINI_API_KEY`
  - Verificar no 1Password: `Gemini-API-Keys`
  - Validar expira√ß√£o (sem necessidade de expira√ß√£o)
  - Testar conex√£o se poss√≠vel

- ‚úÖ **Claude**: Validar autentica√ß√£o e API
  - Verificar configura√ß√£o MCP
  - Validar sem necessidade de expira√ß√£o

- ‚úÖ **Cursor**: Validar configura√ß√£o
  - Verificar settings e keybindings
  - Validar extens√µes

- ‚úÖ **ChatGPT Plus**: Validar API key se configurada
  - Verificar no 1Password
  - Validar sem necessidade de expira√ß√£o

- ‚úÖ **Hostinger**: Validar `HOSTINGER_API_TOKEN`
  - Verificar no 1Password: `API-VPS-HOSTINGER`
  - Testar API: `curl -X GET "https://developers.hostinger.com/api/vps/v1/virtual-machines"`

- ‚úÖ **GitHub**: Validar `GITHUB_TOKEN`
  - Verificar no 1Password
  - Testar: `gh api user`

- ‚úÖ **HuggingFace**: Validar `HF_TOKEN`
  - Verificar no 1Password
  - Validar sem necessidade de expira√ß√£o

#### 9.2 Remo√ß√£o de Chaves Expiradas
- ‚úÖ Identificar chaves expiradas no 1Password
- ‚úÖ Remover chaves obsoletas
- ‚úÖ Atualizar documenta√ß√£o

### FASE 10: Protocolos Validados

#### 10.1 Protocolos de Comunica√ß√£o
- ‚úÖ **SSH**: Validar configura√ß√£o `~/.ssh/config`
  - Aliases: vps, admin-vps, github.com, hf.co
  - Chave: `id_ed25519_universal`
  - Permiss√µes corretas (600 para chaves, 644 para config)

- ‚úÖ **HTTPS/HTTP**: Validar certificados SSL
  - Verificar dom√≠nios: senamfo.com.br, coolify.senamfo.com.br
  - Validar Let's Encrypt se aplic√°vel
  - Testar conectividade HTTPS

- ‚úÖ **Git**: Validar configura√ß√£o
  - Verificar remotes
  - Validar autentica√ß√£o SSH
  - Testar push/pull

#### 10.2 Protocolos de API
- ‚úÖ Validar REST APIs configuradas
- ‚úÖ Validar autentica√ß√£o Bearer Token
- ‚úÖ Validar rate limits e timeouts

### FASE 11: Navegadores e HTTP/HTTPS

#### 11.1 Valida√ß√£o de Navegadores
- ‚úÖ Verificar configura√ß√µes de navegador (se aplic√°vel)
- ‚úÖ Validar extens√µes necess√°rias
- ‚úÖ Validar certificados SSL

#### 11.2 Valida√ß√£o HTTP/HTTPS
- ‚úÖ Testar endpoints principais:
  - `https://senamfo.com.br`
  - `https://coolify.senamfo.com.br`
  - `https://n8n.senamfo.com.br`
  - `https://chatwoot.senamfo.com.br`
- ‚úÖ Validar redirecionamentos HTTP ‚Üí HTTPS
- ‚úÖ Validar certificados SSL v√°lidos

### FASE 12: Melhores Pr√°ticas do Framework

#### 12.1 Nomenclaturas Padronizadas
- ‚úÖ Seguir padr√£o: `<prefixo>-<tipo>-<ambiente>-<versao>-<timestamp>.<extensao>`
- ‚úÖ Prefixos: `op-`, `vps-`, `sys-`, `api-`, `email-`, `db-`, `docker-`, `traefik-`
- ‚úÖ Tipos: `config`, `export`, `diag`, `audit`, `log`, `key`, `mapping`
- ‚úÖ Ambientes: `dev`, `prod`, `macos`, `vps`, `all`

#### 12.2 Estrutura de Diret√≥rios
- ‚úÖ Seguir estrutura padr√£o `~/Dotfiles`
- ‚úÖ Separar: `configs/`, `scripts/`, `credentials/`, `context/`, `docs/`
- ‚úÖ Manter organiza√ß√£o hier√°rquica

#### 12.3 Versionamento
- ‚úÖ Commits com mensagens padronizadas:
  - `feat:` para novas funcionalidades
  - `fix:` para corre√ß√µes
  - `docs:` para documenta√ß√£o
  - `refactor:` para refatora√ß√µes
- ‚úÖ Incluir timestamp e log reference nos commits
- ‚úÖ Seguir framework das aulas com coment√°rios descritivos

#### 12.4 Seguran√ßa
- ‚úÖ NUNCA commitar credenciais
- ‚úÖ Usar 1Password para todas as credenciais
- ‚úÖ Permiss√µes corretas (600 para credenciais, 755 para scripts)
- ‚úÖ Valida√ß√£o de integridade (SHA-256 quando aplic√°vel)

### FASE 13: Documentos Obsoletos Arquivados

#### 13.1 Identifica√ß√£o de Documentos Obsoletos
- ‚úÖ Procurar documentos com data antiga (> 6 meses sem atualiza√ß√£o)
- ‚úÖ Identificar documentos duplicados
- ‚úÖ Identificar documentos substitu√≠dos

#### 13.2 Arquivamento
- ‚úÖ Mover para `~/Dotfiles/docs/archived/` ou `~/10_INFRAESTRUTURA_VPS/documentacao/archived/`
- ‚úÖ Adicionar prefixo `[ARCHIVED]` no nome
- ‚úÖ Adicionar nota de arquivamento no conte√∫do
- ‚úÖ Atualizar refer√™ncias nos documentos ativos

### FASE 14: Acompanhamento Claro de Etapas

#### 14.1 Logging
- ‚úÖ Criar logs em `~/Dotfiles/logs/` ou `~/10_INFRAESTRUTURA_VPS/logs/`
- ‚úÖ Formato: `setup-YYYYMMDD_HHMMSS.log`
- ‚úÖ Incluir timestamp em cada entrada
- ‚úÖ N√≠veis: INFO, SUCCESS, WARNING, ERROR

#### 14.2 Documenta√ß√£o de Progresso
- ‚úÖ Criar `RESUMO_EXECUCAO_YYYYMMDD.md` ap√≥s execu√ß√£o
- ‚úÖ Listar todas as etapas executadas
- ‚úÖ Indicar status de cada etapa (‚úÖ, ‚ùå, ‚ö†Ô∏è)
- ‚úÖ Documentar pr√≥ximos passos manuais

#### 14.3 Status Updates
- ‚úÖ Atualizar status em tempo real durante execu√ß√£o
- ‚úÖ Usar emojis para clareza visual:
  - ‚úÖ Sucesso
  - ‚ùå Erro
  - ‚ö†Ô∏è Aviso
  - üîÑ Em progresso
  - ‚è≥ Pendente

---

## üö® REGRAS DE EXECU√á√ÉO

### Regra 1: Execu√ß√£o Autom√°tica
Quando um planejamento √© aprovado:
1. **N√ÉO perguntar** sobre cada etapa individual
2. **EXECUTAR automaticamente** seguindo a sequ√™ncia acima
3. **PARAR apenas** quando chegar √† parte manual
4. **DOCUMENTAR** tudo que foi executado

### Regra 2: Valida√ß√£o Obrigat√≥ria
Antes de executar cada fase:
- ‚úÖ Validar pr√©-requisitos
- ‚úÖ Verificar depend√™ncias
- ‚úÖ Confirmar credenciais dispon√≠veis
- ‚úÖ Validar conectividade quando necess√°rio

### Regra 3: Tratamento de Erros
Se uma etapa falhar:
- ‚úÖ Registrar erro no log
- ‚úÖ Continuar com pr√≥ximas etapas quando poss√≠vel
- ‚úÖ Documentar erro e solu√ß√£o proposta
- ‚úÖ N√£o interromper execu√ß√£o completa a menos que cr√≠tico

### Regra 4: Parte Manual
Quando chegar √† parte manual:
- ‚úÖ Parar execu√ß√£o autom√°tica
- ‚úÖ Documentar claramente o que precisa ser feito manualmente
- ‚úÖ Fornecer instru√ß√µes passo a passo
- ‚úÖ Listar pr√©-requisitos e verifica√ß√µes necess√°rias

---

## üìã CHECKLIST DE EXECU√á√ÉO

Ao executar um planejamento aprovado, seguir esta checklist:

- [ ] FASE 1: Contexto atualizado
- [ ] FASE 2: Cofres validados
- [ ] FASE 3: Terminais configurados
- [ ] FASE 4: IDEs configuradas
- [ ] FASE 5: Contexto global atualizado
- [ ] FASE 6: Automa√ß√£o 1Password/GitHub validada
- [ ] FASE 7: Codespaces/DevContainers validados
- [ ] FASE 8: MCP Servers verificados
- [ ] FASE 9: APIs validadas
- [ ] FASE 10: Protocolos validados
- [ ] FASE 11: Navegadores/HTTP/HTTPS validados
- [ ] FASE 12: Melhores pr√°ticas aplicadas
- [ ] FASE 13: Documentos obsoletos arquivados
- [ ] FASE 14: Acompanhamento documentado

---

## üéØ EXEMPLO DE EXECU√á√ÉO

Quando o usu√°rio aprovar um planejamento:

1. **Iniciar**: "Executando planejamento aprovado automaticamente..."
2. **FASE 1**: Atualizar contexto ‚Üí ‚úÖ Conclu√≠do
3. **FASE 2**: Validar cofres ‚Üí ‚úÖ Conclu√≠do
4. **FASE 3**: Configurar terminais ‚Üí ‚úÖ Conclu√≠do
5. ... (continuar automaticamente)
6. **FASE 14**: Documentar progresso ‚Üí ‚úÖ Conclu√≠do
7. **PARAR**: "Chegamos √† parte manual. Pr√≥ximos passos: [lista]"

---

## ‚ö†Ô∏è IMPORTANTE

- **SEMPRE** seguir a sequ√™ncia l√≥gica acima
- **NUNCA** pular etapas sem valida√ß√£o
- **SEMPRE** documentar o que foi executado
- **SEMPRE** parar na parte manual com instru√ß√µes claras
- **SEMPRE** usar nomenclaturas padronizadas
- **SEMPRE** seguir melhores pr√°ticas do framework

---

**√öltima atualiza√ß√£o**: 2025-11-17  
**Vers√£o**: 2.0.0 - Execu√ß√£o Autom√°tica Parametrizada
